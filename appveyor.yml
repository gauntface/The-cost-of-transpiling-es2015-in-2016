version: 1.0.{build}

# Test against this version of Node.js
environment:
  matrix:
  - nodejs_version: "4"
  - nodejs_version: "5"

# Install scripts. (runs after repo cloning)
install:
  # Get the latest stable version of Node.js or io.js
  - ps: Install-Product node $env:nodejs_version
  # install modules
  - npm install
  - npm install -g babel-preset-es2015

# Post-install test scripts.
test_script:
  # Output useful info for debugging.
  - node --version
  - npm --version
  - node node_modules\babel-cli\bin\babel.js src\src --presets babel-preset-es2015 --out-dir dist
  - node node_modules\browserify\bin\cmd.js -p bundle-collapser\plugin dist\app.js | node ./node_modules/uglify-js/bin/uglifyjs --compress --mangle --screw-ie8 - > src\dist\bundle.js

# Don't actually build.
build: off
